# ğŸ” HU23 â€” AutenticaciÃ³n de Administradores

> MÃ³dulo encargado de permitir el acceso seguro de los administradores al sistema Digital Twins mediante autenticaciÃ³n con JWT y registro de auditorÃ­a.

---

## ğŸ“Œ DescripciÃ³n de la Historia de Usuario
**Como** administrador del sistema,  
**Quiero** iniciar sesiÃ³n con mis credenciales,  
**Para** acceder de manera segura a todas las funcionalidades administrativas.

---

## ğŸ¯ Objetivos
- Permitir inicio de sesiÃ³n mediante usuario y contraseÃ±a
- Mantener una sesiÃ³n segura mediante **token JWT**
- Registrar auditorÃ­a de eventos relacionados con autenticaciÃ³n

---

## ğŸš€ Funcionalidades Implementadas

| CÃ³digo | Funcionalidad | Estado |
|--------|---------------|-------|
| HU23-F1 | Inicio de sesiÃ³n de administradores mediante API | âœ”ï¸ |
| HU23-F2 | ValidaciÃ³n de credenciales en BD | âœ”ï¸ |
| HU23-F3 | GeneraciÃ³n de token JWT | âœ”ï¸ |
| HU23-F4 | Registro de auditorÃ­a en login exitoso | âœ”ï¸ |
| HU23-F5 | Registro de auditorÃ­a en login fallido | âœ”ï¸ |

---

## ğŸ”’ Seguridad

- ContraseÃ±as encriptadas con BCrypt
- GestiÃ³n de sesiÃ³n basada en token (no cookies)
- Acceso restringido por roles:
  - `ROLE_ADMIN`

---

## ğŸ§© Endpoint Implementado

### ğŸ”¹ POST `/auth/login`

ğŸ“¥ Request:
```json
{
  "username": "admin",
  "password": "123456"
}
Response:

{
  "token": "eyJh...jwt",
  "userId": 1,
  "username": "admin",
  "roles": ["ADMIN"]
}

ğŸ›¡ AuditorÃ­a Integrada

Se registra automÃ¡ticamente:

Login exitoso

Login fallido

InformaciÃ³n de IP

Fecha y hora

ğŸ“Œ Flujo de AutenticaciÃ³n
flowchart TD
A[Login] --> B[Enviar credenciales]
B --> C{Â¿Credenciales vÃ¡lidas?}
C -- SÃ­ --> D[Generar JWT] --> E[Dashboard]
C -- No --> F[Error] --> G[Registrar auditorÃ­a]

ğŸ§ª Casos de Prueba
ID	Caso de Prueba	Resultado Esperado
CP23-01	Credenciales correctas	Acceso + token
CP23-02	Usuario invÃ¡lido	Error + auditorÃ­a
CP23-03	ContraseÃ±a incorrecta	Error + auditorÃ­a
CP23-04	Usuario sin rol ADMIN	Acceso denegado
CP23-05	Token expirado	Cierre de sesiÃ³n
ğŸ Criterios de AceptaciÃ³n

âœ” Inicio de sesiÃ³n funcional desde el frontend
âœ” Token vÃ¡lido mientras exista sesiÃ³n
âœ” AuditorÃ­a activa para todos los eventos de login
âœ” Acceso seguro por roles

ğŸ“Œ Estatus: Completada

ğŸ‘¤ Responsable
Nombre	Rol
Maryerifer Adriana Castro Ramos	Desarrollo Front + Back y AuditorÃ­a
